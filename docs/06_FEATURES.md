# üöÄ –ö–ª—é—á–µ–≤—ã–µ –§–∏—á–∏ MVP (–î–µ—Ç–∞–ª—å–Ω–æ–µ –û–ø–∏—Å–∞–Ω–∏–µ)

---

## 1. üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –û–Ω–±–æ—Ä–¥–∏–Ω–≥

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**Flow:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ö–æ–¥–∏—Ç –Ω–∞ `/register`
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - Email (—Å—Ç–∞–Ω–µ—Ç Owner)
   - –ü–∞—Ä–æ–ª—å
3. Backend —Å–æ–∑–¥–∞–µ—Ç:
   - `Organization` (slug –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
   - `User` (role: 'owner')
   - `Session`
4. Redirect –Ω–∞ `/dashboard`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Email –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ (–Ω–µ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
- Slug –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è (—Ç—Ä–∞–Ω—Å–ª–∏—Ç–µ—Ä–∞—Ü–∏—è + —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å)
- Trial –ø–µ—Ä–∏–æ–¥ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (14 –¥–Ω–µ–π)

---

## 2. üìö –ö–∞—Ç–∞–ª–æ–≥ –ü—É–±–ª–∏—á–Ω—ã—Ö Roadmaps

### –ü—Ä–æ—Å–º–æ—Ç—Ä –®–∞–±–ª–æ–Ω–æ–≤

**URL:** `/roadmaps`

**–ß—Ç–æ –≤–∏–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- –ö–∞—Ä—Ç–æ—á–∫–∏ –ø—É–±–ª–∏—á–Ω—ã—Ö roadmaps (—Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–æ–º –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã)
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ, –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ, –°–µ—Ä–≤–∏—Å)
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–≤—ã–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º roadmap

**–î–ª—è –Ω–µ–∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã—Ö:**
- –ú–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫
- –ú–æ–≥—É—Ç –æ—Ç–∫—Ä—ã—Ç—å roadmap (read-only)
- –ù–ï –º–æ–≥—É—Ç —Ñ–æ—Ä–∫–∞—Ç—å –∏–ª–∏ –æ—Ç–º–µ—á–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å

**–î–ª—è –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω—ã—Ö:**
- + –ö–Ω–æ–ø–∫–∞ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω" –Ω–∞ –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ
- + –í–∏–¥—è—Ç —Å–≤–æ–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ roadmaps

---

## 3. üé® –ü—Ä–æ—Å–º–æ—Ç—Ä Roadmap (Read-Only)

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ì—Ä–∞—Ñ

**URL:** `/roadmaps/:slug`

**React Flow Features:**
- –ó—É–º (Ctrl + Scroll)
- Pan (Drag –∫–∞–Ω–≤–∞—Å–∞)
- Minimap (–º–∏–Ω–∏-–∫–∞—Ä—Ç–∞ –≤ —É–≥–ª—É)
- –ü–æ–∏—Å–∫ —É–∑–ª–∞ (Ctrl + F)

**–†–∞—Å–∫—Ä–∞—Å–∫–∞ –£–∑–ª–æ–≤:**
```
–°–µ—Ä—ã–π    ‚Üí todo (–µ—â–µ –Ω–µ –Ω–∞—á–∞–ª)
–ñ–µ–ª—Ç—ã–π   ‚Üí in_progress (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ)
–ó–µ–ª–µ–Ω—ã–π  ‚Üí completed (–∏–∑—É—á–µ–Ω–æ)
–ö—Ä–∞—Å–Ω—ã–π  ‚Üí expired (–¥–æ–ø—É—Å–∫ –∏—Å—Ç–µ–∫)
–û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Üí expiring_soon (–∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ <30 –¥–Ω–µ–π)
```

**–ö–ª–∏–∫ –ø–æ —É–∑–ª—É:**
- –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Sidebar —Å–ø—Ä–∞–≤–∞ (Slide-over –ø–∞–Ω–µ–ª—å)
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è:
  - –ù–∞–∑–≤–∞–Ω–∏–µ
  - –û–ø–∏—Å–∞–Ω–∏–µ
  - –ö–∞—Ç–µ–≥–æ—Ä–∏—è
  - –°—Å—ã–ª–∫–∏ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)
  - –°—Ç–∞—Ç—É—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–µ—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω)
  - –ö–Ω–æ–ø–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–æ–ª–∏ –∏ —Ç–∏–ø–∞ —É–∑–ª–∞)

---

## 4. üç¥ Fork Roadmap (–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –®–∞–±–ª–æ–Ω–∞)

### –°—Ü–µ–Ω–∞—Ä–∏–π:

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** Manager –∏–ª–∏ Owner –∫–æ–º–ø–∞–Ω–∏–∏

**Steps:**
1. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π roadmap "–°–≤–∞—Ä—â–∏–∫"
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω"
3. Backend –≤—ã–∑—ã–≤–∞–µ—Ç `RoadmapForkService`:
   - –ö–æ–ø–∏—Ä—É–µ—Ç `Roadmap`
   - –ö–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ `Skills` (–Ω–æ–≤—ã–µ ID)
   - –ö–æ–ø–∏—Ä—É–µ—Ç –≤—Å–µ `SkillDependencies` (—Å mapping ID)
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `organization_id = —Ç–µ–∫—É—â–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è`
   - Slug –¥–µ–ª–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–º (`welder-copy-1234`)
4. Redirect –Ω–∞ `/organizations/roadmaps/:id/edit`
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å —É–∂–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –≥—Ä–∞—Ñ–æ–º

**–í–∞–∂–Ω–æ:**
- Permit —É–∑–ª—ã –ù–ï –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é, —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫–∞ –Ω–∞ `permit_template_id`
- –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ù–ï –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è (—ç—Ç–æ –Ω–æ–≤—ã–π roadmap)
- –ü–æ—Å–ª–µ —Ñ–æ—Ä–∫–∞ roadmap —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è `visibility: 'private'`

---

## 5. ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä Roadmap (–£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –¥–ª—è MVP)

### Layout –†–µ–¥–∞–∫—Ç–æ—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ [–ù–∞–∑–≤–∞–Ω–∏–µ Roadmap]     [Auto-arrange] [Save] [Back]         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Sidebar   ‚îÇ        React Flow Canvas       ‚îÇ  Form Panel   ‚îÇ
‚îÇ            ‚îÇ                                ‚îÇ               ‚îÇ
‚îÇ [+ –ù–∞–≤—ã–∫]  ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îÇ  Edit Skill   ‚îÇ
‚îÇ [+ –î–æ–ø—É—Å–∫] ‚îÇ   ‚îÇ A  ‚îÇ‚îÄ‚îÄ‚Üí‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ  Title: ___   ‚îÇ
‚îÇ            ‚îÇ   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ B  ‚îÇ             ‚îÇ  Descr: ___   ‚îÇ
‚îÇ –°–ø–∏—Å–æ–∫:    ‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ  Type:  [v]   ‚îÇ
‚îÇ  ‚úì A       ‚îÇ                ‚Üì              ‚îÇ               ‚îÇ
‚îÇ  ‚úì B       ‚îÇ            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ  [Delete]     ‚îÇ
‚îÇ  ‚úì C       ‚îÇ            ‚îÇ C  ‚îÇ             ‚îÇ  [Save]       ‚îÇ
‚îÇ            ‚îÇ            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –§—É–Ω–∫—Ü–∏–∏ MVP:

#### ‚úÖ –ß—Ç–æ –ú–û–ñ–ï–ú:
- –î–æ–±–∞–≤–ª—è—Ç—å –Ω–∞–≤—ã–∫ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É (Sidebar ‚Üí Form Panel)
- –î–æ–±–∞–≤–ª—è—Ç—å –¥–æ–ø—É—Å–∫ (–≤—ã–±–æ—Ä –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ `PermitTemplate`)
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤—è–∑–∏ (drag –æ—Ç —É–∑–ª–∞ –∫ —É–∑–ª—É –≤ React Flow)
- –£–¥–∞–ª—è—Ç—å —É–∑–ª—ã (—á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é –∏–ª–∏ Form Panel)
- –£–¥–∞–ª—è—Ç—å —Å–≤—è–∑–∏ (–∫–ª–∏–∫ –ø–æ edge ‚Üí Delete)
- Auto-arrange (–∫–Ω–æ–ø–∫–∞ –≤—ã–∑—ã–≤–∞–µ—Ç Dagre layout ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ë–î)

#### ‚ùå –ß—Ç–æ –ù–ï –ú–û–ñ–ï–ú (–≤ MVP):
- Drag-and-drop —É–∑–ª–æ–≤ —Ä—É–∫–∞–º–∏ (–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Auto-arrange)
- Inline editing (—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä—è–º–æ –Ω–∞ —É–∑–ª–µ)
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É–∑–ª–æ–≤ –≤–∏–∑—É–∞–ª—å–Ω–æ
- Undo/Redo
- Collaborative editing (real-time)

### API Endpoints:

```
POST   /organizations/roadmaps/:roadmap_id/skills
  ‚Üí –°–æ–∑–¥–∞—Ç—å –Ω–∞–≤—ã–∫

PATCH  /organizations/roadmaps/:roadmap_id/skills/:id
  ‚Üí –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤—ã–∫

DELETE /organizations/roadmaps/:roadmap_id/skills/:id
  ‚Üí –£–¥–∞–ª–∏—Ç—å –Ω–∞–≤—ã–∫

POST   /organizations/roadmaps/:roadmap_id/dependencies
  ‚Üí –°–æ–∑–¥–∞—Ç—å —Å–≤—è–∑—å (edge)

DELETE /organizations/roadmaps/:roadmap_id/dependencies/:id
  ‚Üí –£–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å
```

---

## 6. üìä –¢—Ä–µ–∫–∏–Ω–≥ –ü—Ä–æ–≥—Ä–µ—Å—Å–∞ (Employee)

### –î–ª—è –û–±—ã—á–Ω—ã—Ö –ù–∞–≤—ã–∫–æ–≤ (skill_type = 'skill')

**Sidebar –¥–µ–π—Å—Ç–≤–∏—è:**

**–°—Ç–∞—Ç—É—Å TODO:**
- –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ" ‚Üí `status = 'in_progress'`, `started_at = now`

**–°—Ç–∞—Ç—É—Å IN_PROGRESS:**
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ—Ç–∏—Ç—å –∏–∑—É—á–µ–Ω–Ω—ã–º" ‚Üí `status = 'completed'`, `completed_at = now`

**–°—Ç–∞—Ç—É—Å COMPLETED:**
- –ü–æ–∫–∞–∑—ã–≤–∞–µ–º ‚úì "–ò–∑—É—á–µ–Ω–æ"
- –î–∞—Ç—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

**–í–∞–∂–Ω–æ:**
- –ù–ï–¢ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
- –ü—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
- –£–∑–µ–ª –Ω–∞ –≥—Ä–∞—Ñ–µ –º–µ–Ω—è–µ—Ç —Ü–≤–µ—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–ª–∏–∫–∞

---

### –î–ª—è –î–æ–ø—É—Å–∫–æ–≤ (skill_type = 'permit')

**Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É:**

```
–î–∞–Ω–Ω—ã–µ –¥–æ–ø—É—Å–∫–∞
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ù–æ–º–µ—Ä —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è: [__________]
–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏:         [__/__/____]
–ö–µ–º –≤—ã–¥–∞–Ω–æ:          [__________]
                     (–†–æ—Å—Ç–µ—Ö–Ω–∞–¥–∑–æ—Ä –ú–†–û ‚Ññ1)

–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 12 –º–µ—Å—è—Ü–µ–≤
                     
[–°–æ—Ö—Ä–∞–Ω–∏—Ç—å]
```

**Backend –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏:**
1. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª–µ–π (–Ω–æ–º–µ—Ä –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –¥–∞—Ç–∞ –≤—ã–¥–∞—á–∏ < —Å–µ–≥–æ–¥–Ω—è)
2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç `expires_at`:
   ```ruby
   progress.expires_at = progress.issued_at + skill.permit_template.expiration_months.months
   ```
3. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º `status = 'completed'`
4. –ï—Å–ª–∏ `expires_at < 30.days.from_now` ‚Üí `status = 'expiring_soon'`

**Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:**
- –ó–∞ 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è ‚Üí email —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
- –ó–∞ 7 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è ‚Üí email —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É + –º–µ–Ω–µ–¥–∂–µ—Ä—É
- –ü–æ—Å–ª–µ –∏—Å—Ç–µ—á–µ–Ω–∏—è ‚Üí —Å—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `expired` (—Ñ–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞)

---

## 7. üìà Dashboard (Employee)

### –í–∏–¥–∂–µ—Ç—ã:

#### 1. –ú–æ–∏ Roadmaps
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –°–≤–∞—Ä—â–∏–∫                        70%  ‚îÇ
‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë          ‚îÇ
‚îÇ 14 –∏–∑ 20 –Ω–∞–≤—ã–∫–æ–≤                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 2. –ò—Å—Ç–µ–∫–∞—é—â–∏–µ –î–æ–ø—É—Å–∫–∏ (Alert Widget)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ö†Ô∏è  –ò—Å—Ç–µ–∫–∞—é—Ç —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –≠–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å II    01.03.26  ‚îÇ
‚îÇ –ù–ê–ö–° –ù–ö                   15.03.26  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### 3. –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –î–æ–ø—É—Å–∫–∏ (–ï—Å–ª–∏ –µ—Å—Ç—å)
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚ùå –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –¥–æ–ø—É—Å–∫–∏!            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –°—Ç—Ä–æ–ø–∞–ª—å—â–∏–∫            –ò—Å—Ç–µ–∫ 5 –¥.–Ω. ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## 8. üìä Dashboard (Manager)

### –í–∏–¥–∂–µ—Ç—ã:

#### 1. –ú–∞—Ç—Ä–∏—Ü–∞ –ù–∞–≤—ã–∫–æ–≤ (–¢–∞–±–ª–∏—Ü–∞)
```
–°–æ—Ç—Ä—É–¥–Ω–∏–∫      | MIG –°–≤–∞—Ä–∫–∞ | –¢–ë  | –≠–ª–µ–∫—Ç—Ä–æ II | –ù–ê–ö–°
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
–ò–≤–∞–Ω–æ–≤ –ò.–ò.    | ‚úÖ         | ‚úÖ  | ‚è≥ 30 –¥–Ω   | ‚ùå
–ü–µ—Ç—Ä–æ–≤ –ü.–ü.    | ‚è≥         | ‚úÖ  | ‚úÖ         | ‚úÖ
–°–∏–¥–æ—Ä–æ–≤ –°.–°.   | ‚ùå         | ‚úÖ  | ‚ùå –ò—Å—Ç–µ–∫   | ‚ùå
```

#### 2. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –û—Ç–¥–µ–ª–∞
```
–°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: 65%
–ò—Å—Ç–µ–∫–∞—é—â–∏—Ö –¥–æ–ø—É—Å–∫–æ–≤: 3
–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö: 1
```

#### 3. –°–ø–∏—Å–æ–∫ –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–¥–µ–ª—É
- –ü–æ–∏—Å–∫ –ø–æ –§–ò–û
- –ö–ª–∏–∫ ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–µ–≥–æ roadmaps + –ø—Ä–æ–≥—Ä–µ—Å—Å)

---

## 9. üîî Email –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Background Jobs)

### ExpiringPermitsNotifierJob

**–ó–∞–ø—É—Å–∫:** Daily (—á–µ—Ä–µ–∑ Solid Queue, rake task –≤ cron)

**–õ–æ–≥–∏–∫–∞:**
```ruby
# –ù–∞—Ö–æ–¥–∏–º –¥–æ–ø—É—Å–∫–∏ –∏—Å—Ç–µ–∫–∞—é—â–∏–µ —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π
permits_30d = UserProgress
  .joins(skill: :permit_template)
  .where('expires_at = ?', 30.days.from_now.to_date)

permits_30d.each do |progress|
  UserMailer.permit_expiring_soon(progress).deliver_later
end

# –ù–∞—Ö–æ–¥–∏–º –¥–æ–ø—É—Å–∫–∏ –∏—Å—Ç–µ–∫–∞—é—â–∏–µ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
permits_7d = UserProgress
  .joins(skill: :permit_template)
  .where('expires_at = ?', 7.days.from_now.to_date)

permits_7d.each do |progress|
  UserMailer.permit_expiring_urgent(progress).deliver_later
  # + —É–≤–µ–¥–æ–º–ª—è–µ–º –º–µ–Ω–µ–¥–∂–µ—Ä–∞
  progress.user.organization.users.where(role: ['manager', 'owner']).each do |manager|
    ManagerMailer.employee_permit_expiring(manager, progress).deliver_later
  end
end

# –ü–æ–º–µ—á–∞–µ–º –∏—Å—Ç–µ–∫—à–∏–µ
UserProgress
  .where('expires_at < ? AND status != ?', Date.today, 'expired')
  .update_all(status: 'expired')
```

---

## 10. üåê i18n (–ó–∞–≥–æ—Ç–æ–≤–∫–∞ –¥–ª—è –ë—É–¥—É—â–µ–≥–æ)

### –¢–µ–∫—É—â–∞—è –†–µ–∞–ª–∏–∑–∞—Ü–∏—è:
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º (—Ö–∞—Ä–¥–∫–æ–¥)
- –ù–∞—Å—Ç—Ä–æ–µ–Ω `react-i18next` —Å –ø—É—Å—Ç—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
```
public/locales/
‚îú‚îÄ‚îÄ ru/
‚îÇ   ‚îî‚îÄ‚îÄ translation.json  # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª (–∑–∞–ø–æ–ª–Ω–µ–Ω)
‚îú‚îÄ‚îÄ en/
‚îÇ   ‚îî‚îÄ‚îÄ translation.json  # –ü—É—Å—Ç–æ–π (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
‚îî‚îÄ‚îÄ es/
    ‚îî‚îÄ‚îÄ translation.json  # –ü—É—Å—Ç–æ–π (–¥–ª—è –±—É–¥—É—â–µ–≥–æ)
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:
```tsx
import { useTranslation } from 'react-i18next';

const { t } = useTranslation();

<Button>{t('buttons.save')}</Button>
```

### –ö–æ–≥–¥–∞ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞—Ç—å:
- –ü–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö –ø—Ä–æ–¥–∞–∂ –≤ –°–ù–ì
- –ü–µ—Ä–µ–¥ –≤—ã—Ö–æ–¥–æ–º –Ω–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–π —Ä—ã–Ω–æ–∫
- –í—Å–µ —Ç–µ–∫—Å—Ç—ã –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `t('key')`
- –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ `translation.json` –Ω–∞ –Ω—É–∂–Ω—ã–µ —è–∑—ã–∫–∏

---

## 11. üîç –ü–æ–∏—Å–∫ –∏ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### –ü–æ–∏—Å–∫ Roadmaps (–ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫–∞—Ç–∞–ª–æ–≥–∞)
```tsx
<Input 
  placeholder="–ü–æ–∏—Å–∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏..." 
  onChange={e => setSearchQuery(e.target.value)}
/>
```

Backend:
```ruby
roadmaps = Roadmap.where('title ILIKE ?', "%#{params[:q]}%")
```

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (Manager Dashboard)
```tsx
<Select 
  options={[
    { value: 'all', label: '–í—Å–µ –æ—Ç–¥–µ–ª—ã' },
    { value: 'welding', label: '–°–≤–∞—Ä–æ—á–Ω—ã–π —Ü–µ—Ö' },
    { value: 'assembly', label: '–°–±–æ—Ä–æ—á–Ω—ã–π —Ü–µ—Ö' },
  ]}
/>
```

---

## 12. üëî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –î–æ–ª–∂–Ω–æ—Å—Ç—è–º–∏ (Job Titles)

### –ö–æ–Ω—Ü–µ–ø—Ü–∏—è: –ì–∏–±—Ä–∏–¥–Ω–∞—è –ú–æ–¥–µ–ª—å

**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–∞–∫ —Å–≤—è–∑–∞—Ç—å –¥–æ–ª–∂–Ω–æ—Å—Ç—å —Å –Ω–∞–≤—ã–∫–∞–º–∏?
- ‚ùå –í–∞—Ä–∏–∞–Ω—Ç A: –î–æ–ª–∂–Ω–æ—Å—Ç—å ‚Üí —Ç–æ–ª—å–∫–æ —Å–ø–∏—Å–æ–∫ –Ω–∞–≤—ã–∫–æ–≤ (–∂–µ—Å—Ç–∫–∞—è —Å–≤—è–∑—å)
- ‚ùå –í–∞—Ä–∏–∞–Ω—Ç B: –î–æ–ª–∂–Ω–æ—Å—Ç—å ‚Üí —Ç–æ–ª—å–∫–æ Roadmap (–Ω–æ –∫–∞–∫–∏–µ –Ω–∞–≤—ã–∫–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã?)
- ‚úÖ **–í–∞—Ä–∏–∞–Ω—Ç C (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω): –ì–∏–±—Ä–∏–¥**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ JobTitle:**
```ruby
class JobTitle < ApplicationRecord
  belongs_to :organization
  belongs_to :roadmap, optional: true  # –ö–∞—Ä—Ç–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ (–¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è)
  
  # JSONB –º–∞—Å—Å–∏–≤ ID –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–æ–ø—É—Å–∫–æ–≤
  attribute :required_permit_template_ids, :jsonb, default: []
end
```

### –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

**üî¥ –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–ø—É—Å–∫–∏** (`required_permit_template_ids`):
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –Æ—Ä–∏–¥–∏—á–µ—Å–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è (–±–µ–∑ –Ω–∏—Ö –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–µ –ø—É—Å—Ç—è—Ç)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** –í—ã–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ `PermitTemplate`
- **–ü—Ä–∏–º–µ—Ä:** –°–≤–∞—Ä—â–∏–∫ ‚Üí [–ù–ê–ö–°, –≠–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å II, –ì–∞–∑–æ—Å–≤–∞—Ä—â–∏–∫]
- **–ü—Ä–æ–≤–µ—Ä–∫–∞:** Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç compliance (—É –∫–æ–≥–æ –Ω–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–æ–ø—É—Å–∫–æ–≤)

**üó∫Ô∏è –ö–∞—Ä—Ç–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏** (`roadmap_id`):
- **–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (–æ–±—É—á–µ–Ω–∏–µ, growth)
- **–ò—Å—Ç–æ—á–Ω–∏–∫:** Roadmap —Å 20+ –Ω–∞–≤—ã–∫–∞–º–∏ (–Ω–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã!)
- **–ü—Ä–∏–º–µ—Ä:** Roadmap "–°–≤–∞—Ä—â–∏–∫" ‚Üí MIG —Å–≤–∞—Ä–∫–∞, TIG —Å–≤–∞—Ä–∫–∞, —á—Ç–µ–Ω–∏–µ —á–µ—Ä—Ç–µ–∂–µ–π...
- **MVP:** –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ (–º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)

---

### User Story: Manager –°–æ–∑–¥–∞–µ—Ç –î–æ–ª–∂–Ω–æ—Å—Ç—å

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. Manager –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç `/organizations/job_titles/new`
2. –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É:
   - –ù–∞–∑–≤–∞–Ω–∏–µ: "–°–≤–∞—Ä—â–∏–∫ 5 —Ä–∞–∑—Ä—è–¥–∞"
   - –û–ø–∏—Å–∞–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π
   - –í—ã–±–∏—Ä–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–ø—É—Å–∫–∏ (checkboxes –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞)
   - *–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:* –í—ã–±–∏—Ä–∞–µ—Ç Roadmap "–°–≤–∞—Ä—â–∏–∫" –¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è
3. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç ‚Üí –¥–æ–ª–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∞

**UI Form:**
```tsx
<form onSubmit={handleSubmit}>
  <Input 
    label="–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏" 
    name="title" 
    required 
    placeholder="–°–≤–∞—Ä—â–∏–∫ 5 —Ä–∞–∑—Ä—è–¥–∞"
  />
  
  <Textarea 
    label="–û–ø–∏—Å–∞–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π" 
    name="description"
    placeholder="–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–≤–∞—Ä–æ—á–Ω—ã—Ö —Ä–∞–±–æ—Ç –ø–æ–≤—ã—à–µ–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏..."
  />
  
  {/* –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –î–û–ü–£–°–ö–ò (–∫—Ä–∏—Ç–∏—á–Ω–æ) */}
  <fieldset className="border-red-200">
    <legend className="text-red-700">
      –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–ø—É—Å–∫–∏ (–±–µ–∑ –Ω–∏—Ö –Ω–∞ —Ä–∞–±–æ—Ç—É –Ω–µ –ø—É—Å—Ç—è—Ç)
    </legend>
    <div className="grid grid-cols-2 gap-2">
      {permitTemplates.map(permit => (
        <Checkbox 
          key={permit.id}
          label={`${permit.title} (${permit.expiration_months} –º–µ—Å)`}
          checked={formData.required_permit_template_ids.includes(permit.id)}
          onChange={() => togglePermit(permit.id)}
        />
      ))}
    </div>
  </fieldset>
  
  {/* –ö–ê–†–¢–ê –ü–†–û–§–ï–°–°–ò–ò (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) */}
  <Select 
    label="–ö–∞—Ä—Ç–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ (–¥–ª—è —Ä–∞–∑–≤–∏—Ç–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞)"
    name="roadmap_id"
    options={organizationRoadmaps}
    placeholder="–ù–µ –≤—ã–±—Ä–∞–Ω–æ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ)"
  />
  
  <div className="text-sm text-gray-500">
    –°–æ–≤–µ—Ç: –°–Ω–∞—á–∞–ª–∞ —É–∫–∞–∂–∏—Ç–µ —Ç–æ–ª—å–∫–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–ø—É—Å–∫–∏. 
    Roadmap –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ, –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–¥–∏—Ç–µ –µ–≥–æ.
  </div>
  
  <Button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–ª–∂–Ω–æ—Å—Ç—å</Button>
</form>
```

---

### User Story: –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Roadmap –ø—Ä–∏ –ü—Ä–∏–µ–º–µ –Ω–∞ –î–æ–ª–∂–Ω–æ—Å—Ç—å

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. Manager –Ω–∞–∑–Ω–∞—á–∞–µ—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –¥–æ–ª–∂–Ω–æ—Å—Ç—å "–°–≤–∞—Ä—â–∏–∫ 5 —Ä–∞–∑—Ä—è–¥–∞"
2. –£ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ —É–∫–∞–∑–∞–Ω `roadmap_id = 5` (Roadmap "–°–≤–∞—Ä—â–∏–∫")
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:** —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —ç—Ç–æ—Ç Roadmap

**–õ–æ–≥–∏–∫–∞ (Backend):**
```ruby
# app/models/user.rb
class User < ApplicationRecord
  belongs_to :job_title, optional: true
  
  after_update :assign_roadmap_from_job_title, if: :job_title_id_changed?
  
  private
  
  def assign_roadmap_from_job_title
    return unless job_title&.roadmap_id
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ—Ç –ª–∏ —É–∂–µ —ç—Ç–æ–≥–æ roadmap
    return if user_progresses.exists?(
      skill_id: job_title.roadmap.skill_ids
    )
    
    # –ù–∞–∑–Ω–∞—á–∞–µ–º roadmap (—Å–æ–∑–¥–∞–µ–º UserProgress –∑–∞–ø–∏—Å–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 'todo')
    job_title.roadmap.skills.find_each do |skill|
      user_progresses.create!(
        skill: skill,
        status: 'todo'
      )
    end
  end
end
```

---

### Manager Dashboard: Compliance Check

**–í–∏–¥–∂–µ—Ç "–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —Å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–º–∏ –¥–æ–ø—É—Å–∫–∞–º–∏":**

```tsx
<Card className="border-red-400">
  <h3>‚ö†Ô∏è –¢—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–æ–ø—É—Å–∫–∏)</h3>
  
  {employeesWithIssues.map(employee => (
    <div key={employee.id} className="border-l-4 border-red-500 pl-3">
      <strong>{employee.full_name}</strong> ({employee.job_title?.title})
      <ul className="text-sm text-red-600">
        {employee.missing_required_permits.map(permit => (
          <li key={permit.id}>
            ‚ùå {permit.title} ‚Äî {permit.status === 'expired' ? '–ò—Å—Ç–µ–∫' : '–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'}
          </li>
        ))}
      </ul>
    </div>
  ))}
</Card>
```

**Backend Query:**
```ruby
# app/services/compliance_checker.rb
class ComplianceChecker
  def initialize(organization)
    @organization = organization
  end
  
  def employees_with_missing_required_permits
    @organization.users.includes(:job_title).select do |user|
      next unless user.job_title
      
      required_permit_ids = user.job_title.required_permit_template_ids
      next if required_permit_ids.empty?
      
      # –ù–∞—Ö–æ–¥–∏–º –¥–æ–ø—É—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      completed_permit_ids = user.user_progresses
        .joins(skill: :permit_template)
        .where(status: ['completed', 'expiring_soon'])
        .pluck('permit_templates.id')
      
      # –ï—Å—Ç—å –ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ?
      missing = required_permit_ids - completed_permit_ids
      missing.any?
    end
  end
end
```

---

### MVP vs MVP+

**MVP (—Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):**
- ‚úÖ CRUD –¥–ª—è JobTitle (Manager/Owner)
- ‚úÖ –ü–æ–ª–µ `required_permit_template_ids` (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- ‚úÖ –ü–æ–ª–µ `roadmap_id` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤ UI)
- ‚úÖ –ê–≤—Ç–æ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ roadmap –ø—Ä–∏ job_title_id_changed
- ‚úÖ Dashboard: compliance check

**MVP+ (–ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö –ø—Ä–æ–¥–∞–∂):**
- üöÄ UI –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è job_title —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É (—Å–µ–π—á–∞—Å —á–µ—Ä–µ–∑ rails console)
- üöÄ –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–í—Å–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏" —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
- üöÄ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞: "–°–∫–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ø—Ä–æ—à–ª–∏ roadmap —Å–≤–æ–µ–π –¥–æ–ª–∂–Ω–æ—Å—Ç–∏"
- üöÄ –ú–∞—Å—Å–æ–≤–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç–∏ (–≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤)

---

## 13. üéØ Permissions & Authorization

### –£—Ä–æ–≤–Ω–∏ –î–æ—Å—Ç—É–ø–∞:

#### Employee:
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä roadmaps (–ø—É–±–ª–∏—á–Ω—ã—Ö –∏ —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
- ‚úÖ –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (—Å–≤–æ–π)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–µ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞
- ‚ùå –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ roadmaps
- ‚ùå –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥—Ä—É–≥–∏—Ö

#### Manager:
- ‚úÖ –í—Å–µ —á—Ç–æ –º–æ–∂–µ—Ç Employee
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ roadmaps –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ roadmaps
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å–≤–æ–µ–≥–æ –æ—Ç–¥–µ–ª–∞
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ç—Ä–∏—Ü—ã –Ω–∞–≤—ã–∫–æ–≤
- ‚úÖ üëî –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ—Å—Ç—è–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- ‚ùå –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π

#### Owner:
- ‚úÖ –í—Å–µ —á—Ç–æ –º–æ–∂–µ—Ç Manager
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π
- ‚úÖ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö:
```ruby
before_action :require_manager!, only: [:edit, :update, :destroy]
before_action :require_owner!, only: [:billing, :invite]
```

---

**–°–ª–µ–¥—É—é—â–∏–π –¥–æ–∫—É–º–µ–Ω—Ç:** `07_TESTING.md`
