# üìÖ –ü–ª–∞–Ω –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ MVP (5 –ù–µ–¥–µ–ª—å)

> **–°—Ä–æ–∫:** 5 –Ω–µ–¥–µ–ª—å (25 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π)  
> **–†–µ–∂–∏–º:** Full-time (8 —á–∞—Å–æ–≤/–¥–µ–Ω—å)  
> **–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** 1 —á–µ–ª–æ–≤–µ–∫ (—Ç—ã + AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç)

---

## üéØ –û–±—â–∞—è –°—Ç—Ä–∞—Ç–µ–≥–∏—è

### –ü—Ä–∞–≤–∏–ª–∞ –†–∞–±–æ—Ç—ã:
1. **Vertical Slicing:** –î–µ–ª–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –æ—Ç –ë–î –¥–æ UI –ø–æ–ª–Ω–æ—Å—Ç—å—é, –∞ –Ω–µ —Å–ª–æ—è–º–∏
2. **Ship Early:** –ö–∞–∂–¥–∞—è –Ω–µ–¥–µ–ª—è –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—á–µ–π —Ñ–∏—á–µ–π (–º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)
3. **No Perfectionism:** "Done is better than perfect" ‚Äî –¥–æ–¥–µ–ª–∞–µ–º –ø–æ—Å–ª–µ –ø–µ—Ä–≤—ã—Ö –ø—Ä–æ–¥–∞–∂
4. **Testing First:** –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∏—á–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º —Å—Ä–∞–∑—É, –Ω–µ –≤ –∫–æ–Ω—Ü–µ

### Daily Workflow:
```
09:00 - 09:15  –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–Ω—è (—á–µ–∫ TODO list)
09:15 - 12:00  –ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞ (—Ñ–æ–∫—É—Å, –±–µ–∑ –æ—Ç–≤–ª–µ—á–µ–Ω–∏–π)
12:00 - 13:00  –û–±–µ–¥
13:00 - 16:00  –ì–ª—É–±–æ–∫–∞—è —Ä–∞–±–æ—Ç–∞
16:00 - 17:00  –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + –¥–µ–ø–ª–æ–π –Ω–∞ staging
17:00 - 17:30  –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ TODO, –∫–æ–º–º–∏—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
```

---

## üìä Roadmap Overview

```
Week 1: Foundation              ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  (30%)
Week 2: Roadmaps Viewer         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë  (60%)
Week 3: Roadmap Editor          ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  (90%)
Week 4: Progress Tracking       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  (95%)
Week 5: Polish & Deploy         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà  (100%)
```

---

## üóìÔ∏è –ù–ï–î–ï–õ–Ø 1: Foundation (–î–Ω–∏ 1-5)

### –¶–µ–ª—å –ù–µ–¥–µ–ª–∏:
‚úÖ –†–∞–±–æ—á–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è  
‚úÖ Multi-tenancy –Ω–∞—Å—Ç—Ä–æ–µ–Ω  
‚úÖ –ë–∞–∑–æ–≤—ã–π UI —Å Layout  
‚úÖ Seeds –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö roadmaps

---

### –î–µ–Ω—å 1: Database & Models (PostgreSQL + paper_trail)

**‚≠ê –ò–∑–º–µ–Ω–µ–Ω–∏—è:** –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –Ω–∞ PostgreSQL —Å Day 1 –¥–ª—è enterprise-ready –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ó–∞–¥–∞—á–∏:**
- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL (Docker Compose)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å gems: `pg`, `acts_as_tenant`, `bcrypt`, `paper_trail`, `blueprinter`, `pagy`
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏: `organizations`, `users`, `sessions`
- [ ] **–ù–û–í–û–ï:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å paper_trail (audit trail)
- [ ] **–ù–û–í–û–ï:** –î–æ–±–∞–≤–∏—Ç—å `external_1c_id` –≤ Users (–¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ 1–°)
- [ ] Models —Å –≤–∞–ª–∏–¥–∞—Ü–∏—è–º–∏
- [ ] Seeds –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–ö–æ–º–∞–Ω–¥—ã:**
```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
docker-compose up -d

# 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å gems
bundle install
# (Gemfile —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω: pg, paper_trail, acts_as_tenant, bcrypt, blueprinter, pagy)

# 3. –°–æ–∑–¥–∞—Ç—å –ë–î
bin/rails db:create

# 4. –ú–∏–≥—Ä–∞—Ü–∏–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
bin/rails g model Organization name:string slug:string:uniq plan_type:string subscription_status:string

# ‚≠ê –í–ê–ñ–ù–û: User —Å –ø–æ–ª–µ–º –¥–ª—è 1–° –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏!
bin/rails g model User organization:references email:string:uniq password_digest:string full_name:string role:string department:string external_1c_id:string synced_from_1c_at:datetime metadata:jsonb

bin/rails g model Session user:references ip_address:string user_agent:string

# 5. ‚≠ê –ù–û–í–û–ï: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å paper_trail (audit trail)
bin/rails generate paper_trail:install --with-changes

# 6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
bin/rails db:migrate
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```ruby
# –í rails console
org = Organization.create!(name: "Test Corp", slug: "test", plan_type: "trial")
user = org.users.create!(
  email: "test@test.com", 
  password: "password123", 
  role: "owner",
  metadata: { personnel_number: "00001" }  # ‚≠ê JSONB —Ä–∞–±–æ—Ç–∞–µ—Ç!
)
user.authenticate("password123")  # –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å user

# ‚≠ê –ù–û–í–û–ï: –ü—Ä–æ–≤–µ—Ä–∫–∞ paper_trail
user.update(full_name: "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤")
user.versions.last.changeset
# => {"full_name"=>[nil, "–ü–µ—Ç—Ä –ü–µ—Ç—Ä–æ–≤"]}
```

**–¢–µ—Å—Ç—ã (–Ω–∞–ø–∏—Å–∞—Ç—å –≤ –∫–æ–Ω—Ü–µ –¥–Ω—è):**
- `test/models/organization_test.rb` (–≤–∞–ª–∏–¥–∞—Ü–∏—è slug uniqueness)
- `test/models/user_test.rb` (has_secure_password —Ä–∞–±–æ—Ç–∞–µ—Ç)
- **–ù–û–í–û–ï:** `test/models/user_test.rb` (paper_trail tracking —Ä–∞–±–æ—Ç–∞–µ—Ç)

**–í—Ä–µ–º—è:** ~7-8 —á–∞—Å–æ–≤ (+1 —á–∞—Å –Ω–∞ PostgreSQL setup)

---

### –î–µ–Ω—å 2: Authentication (Rails 8 Generator)

**–ó–∞–¥–∞—á–∏:**
- [ ] `bin/rails generate authentication`
- [ ] –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ multi-tenancy (signup —Å–æ–∑–¥–∞–µ—Ç Organization)
- [ ] UI: Login/Register —Ñ–æ—Ä–º—ã (Inertia)
- [ ] Tests: integration tests –¥–ª—è sign up/login

**–§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```
app/controllers/sessions_controller.rb
app/controllers/registrations_controller.rb
app/frontend/pages/Auth/Login.tsx
app/frontend/pages/Auth/Register.tsx
```

**Register Form (TSX):**
```tsx
<form onSubmit={handleSubmit}>
  <Input label="–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏" name="organization[name]" />
  <Input label="Email" type="email" name="user[email]" />
  <Input label="–ü–∞—Ä–æ–ª—å" type="password" name="user[password]" />
  <Button type="submit">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</Button>
</form>
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ú–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
- –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ redirect –Ω–∞ `/dashboard`
- –°–æ–∑–¥–∞–µ—Ç—Å—è Organization + User (role: owner)

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 3: UI Foundation (Layout, Tailwind, Components)

**–ó–∞–¥–∞—á–∏:**
- [ ] Setup TypeScript config (`tsconfig.json`)
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Button, Card, Input)
- [ ] Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Navbar + Sidebar)
- [ ] –ü—É—Å—Ç–æ–π Dashboard

**npm install:**
```bash
npm install @headlessui/react lucide-react clsx tailwind-merge date-fns
npm install -D @types/react @types/react-dom typescript
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
```
app/frontend/components/ui/Button.tsx
app/frontend/components/ui/Card.tsx
app/frontend/components/ui/Input.tsx
app/frontend/components/layout/Layout.tsx
app/frontend/components/layout/Navbar.tsx
app/frontend/components/layout/Sidebar.tsx
app/frontend/pages/Dashboard/Index.tsx
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ü–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è Dashboard —Å Navbar/Sidebar
- –í—Å–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ (`npm run type-check`)

**–í—Ä–µ–º—è:** ~6 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 4: Roadmaps & Skills Models + Seeds

**–ó–∞–¥–∞—á–∏:**
- [ ] –ú–∏–≥—Ä–∞—Ü–∏–∏: `roadmaps`, `skills`, `skill_dependencies`, `permit_templates`
- [ ] Models —Å associations
- [ ] Seeds: Permit Templates (10 —Ç–∏–ø–æ–≤—ã—Ö –¥–æ–ø—É—Å–∫–æ–≤ –°–ù–ì)
- [ ] Seeds: 1 –ø—É–±–ª–∏—á–Ω—ã–π roadmap "–°–≤–∞—Ä—â–∏–∫" (—á–µ—Ä–µ–∑ YAML)

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
bin/rails g model Roadmap organization:references forked_from:references title:string slug:string visibility:string is_template:boolean
bin/rails g model Skill roadmap:references permit_template:references key:string title:string skill_type:string position_x:float position_y:float
bin/rails g model SkillDependency from_skill:references to_skill:references kind:string
bin/rails g model PermitTemplate title:string code:string country_code:string expiration_months:integer category:string
```

**YAML Roadmap:**
```yaml
# db/seeds/roadmaps/welder.yml
title: "–°–≤–∞—Ä—â–∏–∫"
slug: "welder"
visibility: "public"
is_template: true
nodes:
  - key: "safety_basics"
    title: "–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
    skill_type: "skill"
    position: [100, 50]
  - key: "electrical_safety_2"
    title: "–≠–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å II –≥—Ä—É–ø–ø–∞"
    skill_type: "permit"
    permit_template_code: "ELEC_II"
    position: [100, 150]
edges:
  - from: "safety_basics"
    to: "electrical_safety_2"
```

**Service –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:**
```ruby
# app/services/roadmap_import_service.rb
class RoadmapImportService
  def import_from_yaml(file_path)
    data = YAML.load_file(file_path)
    # ... –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è roadmap, skills, dependencies
  end
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```ruby
# rails console
Roadmap.public_templates.count  # => 1
PermitTemplate.where(country_code: 'RU').count  # => 10
```

**–í—Ä–µ–º—è:** ~8 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 5: Multi-tenancy Setup + Tests

**–ó–∞–¥–∞—á–∏:**
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `acts_as_tenant` –≤ ApplicationController
- [ ] –î–æ–±–∞–≤–∏—Ç—å tenant scopes –≤ –º–æ–¥–µ–ª–∏
- [ ] **–ö–†–ò–¢–ò–ß–ù–û:** Tests –¥–ª—è multi-tenancy isolation
- [ ] Staging deploy (Kamal setup)

**ApplicationController:**
```ruby
class ApplicationController < ActionController::Base
  include Inertia::Controller
  
  set_current_tenant_through_filter
  before_action :set_tenant
  
  private
  
  def set_tenant
    set_current_tenant(current_user.organization) if user_signed_in?
  end
end
```

**Tests:**
```ruby
# test/integration/multi_tenancy_test.rb
test "user cannot access another org's data" do
  org1 = create(:organization)
  org2 = create(:organization)
  
  user1 = create(:user, organization: org1)
  roadmap2 = create(:roadmap, organization: org2)
  
  sign_in user1
  get organizations_roadmap_path(roadmap2)
  
  assert_response :not_found
end
```

**Kamal Setup:**
```bash
# –ü–µ—Ä–≤—ã–π —Ä–∞–∑ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º —Å–µ—Ä–≤–µ—Ä
kamal setup

# –î–µ–ø–ª–æ–∏–º
kamal deploy
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –í—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª–µ–Ω—ã–µ (`bin/rails test`)
- Staging –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ https://YOUR_SERVER_IP
- Multi-tenancy —Ä–∞–±–æ—Ç–∞–µ—Ç (—Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç)

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### ‚úÖ –ò—Ç–æ–≥ –ù–µ–¥–µ–ª–∏ 1:
- –†–∞–±–æ—á–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚úì
- Multi-tenancy ‚úì
- –ë–∞–∑–æ–≤—ã–π UI ‚úì
- –ü—É–±–ª–∏—á–Ω—ã–µ roadmaps –≤ –ë–î ‚úì
- Staging —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω ‚úì

**Demo:** –ú–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è, —É–≤–∏–¥–µ—Ç—å –ø—É—Å—Ç–æ–π –¥–∞—à–±–æ—Ä–¥

---

## üóìÔ∏è –ù–ï–î–ï–õ–Ø 2: Roadmaps Viewer (–î–Ω–∏ 6-10)

### –¶–µ–ª—å –ù–µ–¥–µ–ª–∏:
‚úÖ React Flow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è  
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—É–±–ª–∏—á–Ω—ã—Ö roadmaps  
‚úÖ Skill Sidebar (–¥–µ—Ç–∞–ª–∏ —É–∑–ª–∞)  
‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≥—Ä–∞—Ñ–∞

---

### –î–µ–Ω—å 6: React Flow Setup + Basic Viewer

**–ó–∞–¥–∞—á–∏:**
- [ ] `npm install reactflow dagre @types/dagre`
- [ ] RoadmapViewer –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (read-only)
- [ ] SkillNode –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (custom node)
- [ ] RoadmapsController#show (–æ—Ç–¥–∞–µ—Ç JSON –¥–ª—è –≥—Ä–∞—Ñ–∞)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
```tsx
// app/frontend/components/roadmap/RoadmapViewer.tsx
// app/frontend/components/roadmap/SkillNode.tsx
// app/frontend/pages/Roadmaps/Show.tsx
```

**Controller:**
```ruby
# app/controllers/roadmaps_controller.rb
def show
  roadmap = Roadmap.find_by!(slug: params[:id])
  
  render inertia: 'Roadmaps/Show', props: {
    roadmap: {
      nodes: roadmap.skills.map { |s| { id: s.id.to_s, position: {x: s.position_x, y: s.position_y}, data: { label: s.title } } },
      edges: roadmap.skill_dependencies.map { |d| { source: d.from_skill_id.to_s, target: d.to_skill_id.to_s } }
    }
  }
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- `/roadmaps/welder` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≥—Ä–∞—Ñ
- –£–∑–ª—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è
- –°–≤—è–∑–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–í—Ä–µ–º—è:** ~8 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 7: Skill Sidebar + Click Interactions

**–ó–∞–¥–∞—á–∏:**
- [ ] SkillSidebar –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (Slide-over panel)
- [ ] –ö–ª–∏–∫ –ø–æ —É–∑–ª—É ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è sidebar
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ: title, description, resources
- [ ] React State management (selectedSkillId)

**–õ–æ–≥–∏–∫–∞:**
```tsx
const [selectedSkillId, setSelectedSkillId] = useState<string | null>(null);

<ReactFlow onNodeClick={(e, node) => setSelectedSkillId(node.id)} />

{selectedSkillId && (
  <SkillSidebar 
    skillId={selectedSkillId}
    onClose={() => setSelectedSkillId(null)}
  />
)}
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ö–ª–∏–∫ –ø–æ —É–∑–ª—É –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç sidebar
- ESC –∏–ª–∏ –∫–ª–∏–∫ –Ω–∞ X –∑–∞–∫—Ä—ã–≤–∞–µ—Ç sidebar
- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–µ –ª–æ–º–∞–µ—Ç UI

**–í—Ä–µ–º—è:** ~6 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 8: User Progress Integration (Read-Only)

**–ó–∞–¥–∞—á–∏:**
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è: `user_progresses`
- [ ] Model UserProgress
- [ ] –†–∞—Å–∫—Ä–∞—Å–∫–∞ —É–∑–ª–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å—É (—Å–µ—Ä—ã–π/–∂–µ–ª—Ç—ã–π/–∑–µ–ª–µ–Ω—ã–π)
- [ ] Seeds: –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–∞—Å–∫—Ä–∞—Å–∫–∞:**
```tsx
const statusColors = {
  todo: 'bg-gray-100 border-gray-300',
  in_progress: 'bg-yellow-100 border-yellow-400',
  completed: 'bg-green-100 border-green-400',
};

<div className={statusColors[data.status]}>
  {data.label}
</div>
```

**Controller update:**
```ruby
def show
  # ... roadmap structure ...
  
  user_progress = current_user.user_progresses
    .where(skill_id: roadmap.skill_ids)
    .index_by(&:skill_id)
  
  render inertia: 'Roadmaps/Show', props: {
    roadmap: graph_structure,
    userProgress: user_progress
  }
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –£–∑–ª—ã —Ä–∞—Å–∫—Ä–∞—à–µ–Ω—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –ï—Å–ª–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω ‚Äî –≤—Å–µ —Å–µ—Ä—ã–µ
- –ï—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω ‚Äî –≤–∏–¥–Ω—ã —Å—Ç–∞—Ç—É—Å—ã

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 9: Catalog + Caching

**–ó–∞–¥–∞—á–∏:**
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ `/roadmaps` (—Å–ø–∏—Å–æ–∫ –ø—É–±–ª–∏—á–Ω—ã—Ö roadmaps)
- [ ] –ö–∞—Ä—Ç–æ—á–∫–∏ roadmaps —Å –ø—Ä–µ–≤—å—é
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≥—Ä–∞—Ñ–∞ (Solid Cache)
- [ ] Performance test (–∑–∞–≥—Ä—É–∑–∫–∞ roadmap < 500ms)

**Catalog Page:**
```tsx
// app/frontend/pages/Roadmaps/Index.tsx
<div className="grid grid-cols-3 gap-4">
  {roadmaps.map(roadmap => (
    <Card key={roadmap.id}>
      <h3>{roadmap.title}</h3>
      <p>{roadmap.skills_count} –Ω–∞–≤—ã–∫–æ–≤</p>
      <Button href={`/roadmaps/${roadmap.slug}`}>
        –û—Ç–∫—Ä—ã—Ç—å
      </Button>
    </Card>
  ))}
</div>
```

**Caching:**
```ruby
Rails.cache.fetch("roadmap/#{roadmap.id}/structure/v#{roadmap.updated_at.to_i}") do
  # ... –≥–µ–Ω–µ—Ä–∞—Ü–∏—è nodes/edges ...
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ö–∞—Ç–∞–ª–æ–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç roadmaps
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∞ –º–µ–¥–ª–µ–Ω–Ω–∞—è, –≤—Ç–æ—Ä–∞—è –±—ã—Å—Ç—Ä–∞—è (–∫—ç—à)
- `bin/rails dev:cache` –≤–∫–ª—é—á–µ–Ω

**–í—Ä–µ–º—è:** ~6 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 10: Tests + Refactoring

**–ó–∞–¥–∞—á–∏:**
- [ ] System test: –ø—Ä–æ—Å–º–æ—Ç—Ä roadmap
- [ ] Integration test: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –≤—ã–Ω–µ—Å—Ç–∏ serializers
- [ ] Code review + cleanup

**System Test:**
```ruby
test "user can view public roadmap and click node" do
  roadmap = create(:roadmap, :public, title: "–°–≤–∞—Ä—â–∏–∫")
  skill = create(:skill, roadmap: roadmap, title: "–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏")
  
  visit roadmap_path(roadmap)
  
  assert_text "–°–≤–∞—Ä—â–∏–∫"
  assert_selector ".react-flow"
  
  find(".react-flow__node", text: "–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏").click
  
  within(".skill-sidebar") do
    assert_text "–¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏"
  end
end
```

**Serializers:**
```ruby
# app/serializers/roadmap_serializer.rb
class RoadmapSerializer < Blueprinter::Base
  identifier :id
  fields :title, :slug, :description
  
  view :with_graph do
    association :skills, blueprint: SkillSerializer
    association :skill_dependencies, blueprint: DependencySerializer
  end
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –í—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª–µ–Ω—ã–µ
- Code coverage > 60%
- –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞

**–í—Ä–µ–º—è:** ~6 —á–∞—Å–æ–≤

---

### ‚úÖ –ò—Ç–æ–≥ –ù–µ–¥–µ–ª–∏ 2:
- React Flow —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≥—Ä–∞—Ñ—ã ‚úì
- Sidebar –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ ‚úì
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–∫–æ—Ä—è–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É ‚úì

**Demo:** –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å roadmap, –∫–ª–∏–∫–Ω—É—Ç—å –ø–æ —É–∑–ª—É, —É–≤–∏–¥–µ—Ç—å –¥–µ—Ç–∞–ª–∏

---

## üóìÔ∏è –ù–ï–î–ï–õ–Ø 3: Roadmap Editor (–î–Ω–∏ 11-15)

### –¶–µ–ª—å –ù–µ–¥–µ–ª–∏:
‚úÖ Fork roadmap  
‚úÖ CRUD –¥–ª—è skills —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—ã  
‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ edges (drag connection)  
‚úÖ Auto-layout

---

### –î–µ–Ω—å 11: Fork Roadmap Service

**–ó–∞–¥–∞—á–∏:**
- [ ] RoadmapForkService
- [ ] Organizations::RoadmapsController (namespace)
- [ ] UI: –∫–Ω–æ–ø–∫–∞ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ
- [ ] Tests: fork –∫–æ–ø–∏—Ä—É–µ—Ç skills + dependencies

**Service:**
```ruby
class RoadmapForkService
  def call
    ActiveRecord::Base.transaction do
      # 1. Copy roadmap
      # 2. Copy skills (+ ID mapping)
      # 3. Copy dependencies (new IDs)
    end
  end
end
```

**Test:**
```ruby
test "fork creates independent copy" do
  source = create(:roadmap, :with_skills, skills_count: 3)
  org = create(:organization)
  
  forked = RoadmapForkService.new(source, org).call
  
  assert_equal 3, forked.skills.count
  assert_not_equal source.skills.first.id, forked.skills.first.id
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ö–ª–∏–∫ "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω" ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–æ–ø–∏—è
- Redirect –Ω–∞ `/organizations/roadmaps/:id/edit`
- Skills —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã —Å –Ω–æ–≤—ã–º–∏ ID

**–í—Ä–µ–º—è:** ~8 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 12-13: Roadmap Editor UI (2 –¥–Ω—è)

**–ó–∞–¥–∞—á–∏:**
- [ ] Layout —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ (3 –∫–æ–ª–æ–Ω–∫–∏: Sidebar | Canvas | Form)
- [ ] Skill CRUD —á–µ—Ä–µ–∑ –±–æ–∫–æ–≤—É—é –ø–∞–Ω–µ–ª—å
- [ ] Organizations::SkillsController (API endpoints)
- [ ] React Forms (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ skill)

**Layout:**
```tsx
<div className="flex h-screen">
  {/* Left: Skill List */}
  <aside className="w-64 border-r">
    <button onClick={() => setShowAddForm(true)}>+ –ù–∞–≤—ã–∫</button>
    <ul>
      {skills.map(skill => (
        <li onClick={() => setEditingSkill(skill)}>
          {skill.title}
        </li>
      ))}
    </ul>
  </aside>
  
  {/* Center: React Flow Canvas */}
  <main className="flex-1">
    <ReactFlow nodes={nodes} edges={edges} />
  </main>
  
  {/* Right: Edit Form */}
  {editingSkill && (
    <aside className="w-96 border-l">
      <SkillForm skill={editingSkill} />
    </aside>
  )}
</div>
```

**API Endpoints:**
```ruby
# app/controllers/organizations/skills_controller.rb
namespace :organizations do
  resources :roadmaps do
    resources :skills, only: [:create, :update, :destroy]
  end
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å skill —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
- Skill –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≥—Ä–∞—Ñ–µ
- –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å/—É–¥–∞–ª—è—Ç—å skill

**–í—Ä–µ–º—è:** ~14 —á–∞—Å–æ–≤ (2 –¥–Ω—è)

---

### –î–µ–Ω—å 14: Edge Creation + Auto-Layout

**–ó–∞–¥–∞—á–∏:**
- [ ] React Flow: onConnect handler (—Å–æ–∑–¥–∞–Ω–∏–µ edges)
- [ ] Organizations::DependenciesController
- [ ] AutoLayoutService (Dagre integration)
- [ ] –ö–Ω–æ–ø–∫–∞ "Auto-arrange" –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ

**onConnect:**
```tsx
const onConnect = useCallback((params) => {
  router.post(`/organizations/roadmaps/${roadmap.id}/dependencies`, {
    from_skill_id: params.source,
    to_skill_id: params.target,
  });
}, []);

<ReactFlow onConnect={onConnect} />
```

**AutoLayoutService:**
```ruby
class AutoLayoutService
  def calculate
    # Dagre layout algorithm
    # Returns positions hash: { skill_key: { x:, y: } }
  end
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- Drag –æ—Ç —É–∑–ª–∞ –∫ —É–∑–ª—É —Å–æ–∑–¥–∞–µ—Ç —Å–≤—è–∑—å
- –ö–Ω–æ–ø–∫–∞ "Auto-arrange" –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 15: Tests + Permissions

**–ó–∞–¥–∞—á–∏:**
- [ ] Permissions: —Ç–æ–ª—å–∫–æ Manager/Owner –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- [ ] Integration tests: Employee –ù–ï –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- [ ] System test: –ø–æ–ª–Ω—ã–π flow (fork ‚Üí add skill ‚Üí save)

**Permissions:**
```ruby
before_action :require_manager!, except: [:index, :show]

def require_manager!
  unless current_user.manager? || current_user.owner?
    redirect_to root_path, alert: "–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω"
  end
end
```

**System Test:**
```ruby
test "manager can fork and edit roadmap" do
  manager = create(:user, role: 'manager')
  public_roadmap = create(:roadmap, :public)
  
  sign_in manager
  visit roadmaps_path
  
  click_button "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω"
  
  # –í —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
  click_button "+ –ù–∞–≤—ã–∫"
  fill_in "–ù–∞–∑–≤–∞–Ω–∏–µ", with: "–ù–æ–≤—ã–π –Ω–∞–≤—ã–∫"
  click_button "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
  
  assert_text "–ù–æ–≤—ã–π –Ω–∞–≤—ã–∫"
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- Employee –ù–ï –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
- –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å URL –Ω–∞–ø—Ä—è–º—É—é ‚Üí 403/redirect
- –í—Å–µ —Ç–µ—Å—Ç—ã –∑–µ–ª–µ–Ω—ã–µ

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### ‚úÖ –ò—Ç–æ–≥ –ù–µ–¥–µ–ª–∏ 3:
- Fork roadmap —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å skills ‚úì
- –°–æ–∑–¥–∞–Ω–∏–µ edges —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- Auto-layout —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç ‚úì
- Permissions –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚úì

**Demo:** Manager –º–æ–∂–µ—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å roadmap –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ —Å–≤–æ—é –∫–æ–º–ø–∞–Ω–∏—é

---

## üóìÔ∏è –ù–ï–î–ï–õ–Ø 4: Progress Tracking (–î–Ω–∏ 16-20)

### –¶–µ–ª—å –ù–µ–¥–µ–ª–∏:
‚úÖ Employee –æ—Ç–º–µ—á–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å  
‚úÖ –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ –¥–æ–ø—É—Å–∫–æ–≤  
‚úÖ Dashboard —Å –≤–∏–¥–∂–µ—Ç–∞–º–∏  
‚úÖ Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

---

### –î–µ–Ω—å 16: Progress Controller + Skill Completion

**–ó–∞–¥–∞—á–∏:**
- [ ] Organizations::ProgressController
- [ ] –ö–Ω–æ–ø–∫–∏ –≤ Sidebar: "–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ" / "–ò–∑—É—á–∏–ª"
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–∑–ª–∞ –Ω–∞ –≥—Ä–∞—Ñ–µ (—Ü–≤–µ—Ç –º–µ–Ω—è–µ—Ç—Å—è)

**Controller:**
```ruby
def update
  progress = current_user.user_progresses.find_or_initialize_by(skill_id: params[:skill_id])
  progress.update!(status: params[:status])
  
  render json: progress
end
```

**UI:**
```tsx
<Button onClick={() => {
  router.post(`/progress/${skill.id}`, { status: 'completed' }, {
    preserveScroll: true,
    onSuccess: () => {
      // –£–∑–µ–ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–µ–ª–µ–Ω—ã–º
    }
  });
}}>
  –û—Ç–º–µ—Ç–∏—Ç—å –∏–∑—É—á–µ–Ω–Ω—ã–º
</Button>
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –ö–ª–∏–∫ "–ò–∑—É—á–∏–ª" ‚Üí —É–∑–µ–ª –∑–µ–ª–µ–Ω–µ–µ—Ç
- –ë–î –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- Reload —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Üí —Å—Ç–∞—Ç—É—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω

**–í—Ä–µ–º—è:** ~6 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 17: Permit Form + Expiration Calculation

**–ó–∞–¥–∞—á–∏:**
- [ ] PermitForm –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] –õ–æ–≥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ expires_at –Ω–∞ backend
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞—Ç
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ø—É—Å–∫–∞

**PermitForm:**
```tsx
<form onSubmit={handleSubmit}>
  <Input label="–ù–æ–º–µ—Ä —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è" name="certificate_number" required />
  <Input type="date" label="–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏" name="issued_at" required />
  <Input label="–ö–µ–º –≤—ã–¥–∞–Ω–æ" name="issuing_authority" />
  
  <div className="text-sm text-gray-500">
    –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: {skill.permitTemplate.expiration_months} –º–µ—Å—è—Ü–µ–≤
  </div>
  
  <Button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</Button>
</form>
```

**Backend:**
```ruby
def update
  # ...
  if skill.permit?
    progress.assign_attributes(permit_params)
    progress.expires_at = progress.issued_at + skill.permit_template.expiration_months.months
  end
  # ...
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –§–æ—Ä–º–∞ –¥–æ–ø—É—Å–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è permit —É–∑–ª–æ–≤
- expires_at —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç (issued_at < expires_at)

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 18: Employee Dashboard

**–ó–∞–¥–∞—á–∏:**
- [ ] –í–∏–¥–∂–µ—Ç "–ú–æ–∏ roadmaps" (–ø—Ä–æ–≥—Ä–µ—Å—Å)
- [ ] –í–∏–¥–∂–µ—Ç "–ò—Å—Ç–µ–∫–∞—é—â–∏–µ –¥–æ–ø—É—Å–∫–∏"
- [ ] –í–∏–¥–∂–µ—Ç "–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ –¥–æ–ø—É—Å–∫–∏"
- [ ] Queries –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è N+1)

**Dashboard:**
```tsx
<div className="grid grid-cols-2 gap-4">
  {/* –ú–æ–∏ roadmaps */}
  <Card>
    <h3>–ú–æ–∏ roadmaps</h3>
    {myRoadmaps.map(roadmap => (
      <div key={roadmap.id}>
        <h4>{roadmap.title}</h4>
        <ProgressBar value={roadmap.progress_percent} />
        <p>{roadmap.completed_count} –∏–∑ {roadmap.total_count}</p>
      </div>
    ))}
  </Card>
  
  {/* –ò—Å—Ç–µ–∫–∞—é—â–∏–µ –¥–æ–ø—É—Å–∫–∏ */}
  <Card className="border-orange-400">
    <h3>‚ö†Ô∏è –ò—Å—Ç–µ–∫–∞—é—Ç —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π</h3>
    {expiringPermits.map(permit => (
      <div>{permit.skill.title} - {permit.expires_at}</div>
    ))}
  </Card>
</div>
```

**Controller:**
```ruby
def index
  @expiring_permits = current_user.user_progresses
    .expiring_soon
    .includes(skill: :permit_template)
  
  # ...
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ù–µ—Ç N+1 –∑–∞–ø—Ä–æ—Å–æ–≤ (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á–µ—Ä–µ–∑ Bullet gem)

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 19: Email Notifications (Background Job)

**–ó–∞–¥–∞—á–∏:**
- [ ] ExpiringPermitsNotifierJob
- [ ] Mailer: UserMailer (permit_expiring_soon, permit_expiring_urgent)
- [ ] Email templates
- [ ] –¢–µ—Å—Ç job + –º–∞◊ô◊ú–µ—Ä–∞

**Job:**
```ruby
class ExpiringPermitsNotifierJob < ApplicationJob
  def perform
    # –ù–∞—Ö–æ–¥–∏–º permit –∏—Å—Ç–µ–∫–∞—é—â–∏–µ —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π
    UserProgress.expiring_soon.find_each do |progress|
      UserMailer.permit_expiring_soon(progress).deliver_later
    end
    
    # –ü–æ–º–µ—á–∞–µ–º –∏—Å—Ç–µ–∫—à–∏–µ
    UserProgress.where('expires_at < ?', Date.today).update_all(status: 'expired')
  end
end
```

**Mailer:**
```ruby
class UserMailer < ApplicationMailer
  def permit_expiring_soon(progress)
    @progress = progress
    @user = progress.user
    
    mail(
      to: @user.email,
      subject: "–î–æ–ø—É—Å–∫ –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ 30 –¥–Ω–µ–π"
    )
  end
end
```

**Template:**
```erb
<h1>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, <%= @user.full_name %>!</h1>

<p>
  –í–∞—à –¥–æ–ø—É—Å–∫ "<%= @progress.skill.title %>" –∏—Å—Ç–µ–∫–∞–µ—Ç <%= @progress.expires_at.strftime('%d.%m.%Y') %>.
</p>

<p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø—Ä–æ–¥–ª–∏—Ç–µ –µ–≥–æ —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–æ.</p>
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- Job –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `bin/rails runner "ExpiringPermitsNotifierJob.perform_now"`
- Email –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è (Letter Opener –≤ dev)
- –ü—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã–µ permits –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ expired

**–í—Ä–µ–º—è:** ~7 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 20: Manager Dashboard + –ú–∞—Ç—Ä–∏—Ü–∞ –ù–∞–≤—ã–∫–æ–≤

**–ó–∞–¥–∞—á–∏:**
- [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –æ—Ç–¥–µ–ª–∞"
- [ ] –ú–∞—Ç—Ä–∏—Ü–∞ –Ω–∞–≤—ã–∫–æ–≤ (—Ç–∞–±–ª–∏—Ü–∞)
- [ ] –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–¥–µ–ª—É
- [ ] Export –≤ CSV (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ú–∞—Ç—Ä–∏—Ü–∞:**
```tsx
<table>
  <thead>
    <tr>
      <th>–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
      {skills.map(skill => <th>{skill.title}</th>)}
    </tr>
  </thead>
  <tbody>
    {employees.map(employee => (
      <tr>
        <td>{employee.full_name}</td>
        {skills.map(skill => (
          <td>
            {getStatusIcon(employee.progress[skill.id])}
          </td>
        ))}
      </tr>
    ))}
  </tbody>
</table>
```

**Controller:**
```ruby
def index
  @employees = current_organization.users.where(department: params[:department])
  @roadmap = current_organization.roadmaps.find(params[:roadmap_id])
  
  # Eager load progress
  @progress_matrix = UserProgress
    .where(user_id: @employees.ids, skill_id: @roadmap.skill_ids)
    .group_by(&:user_id)
    .transform_values { |p| p.index_by(&:skill_id) }
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–∞—Ç—Ä–∏—Ü—É –Ω–∞–≤—ã–∫–æ–≤
- –§–∏–ª—å—Ç—Ä –ø–æ –æ—Ç–¥–µ–ª—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –æ—Ç–¥–µ–ª

**–í—Ä–µ–º—è:** ~8 —á–∞—Å–æ–≤

---

### ‚úÖ –ò—Ç–æ–≥ –ù–µ–¥–µ–ª–∏ 4:
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –æ—Ç–º–µ—á–∞—é—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å ‚úì
- –§–æ—Ä–º–∞ –¥–æ–ø—É—Å–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∏–¥–∂–µ—Ç—ã ‚úì
- Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã ‚úì
- –ú–∞—Ç—Ä–∏—Ü–∞ –Ω–∞–≤—ã–∫–æ–≤ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–∞ ‚úì

**Demo:** –ü–æ–ª–Ω—ã–π user flow –æ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –¥–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ø—É—Å–∫–∞

---

## üóìÔ∏è –ù–ï–î–ï–õ–Ø 5: Polish & Deploy (–î–Ω–∏ 21-25)

### –¶–µ–ª—å –ù–µ–¥–µ–ª–∏:
‚úÖ Bug fixes  
‚úÖ Performance optimization  
‚úÖ Production deploy  
‚úÖ Documentation

---

### –î–µ–Ω—å 21: Bug Hunting + System Tests

**–ó–∞–¥–∞—á–∏:**
- [ ] –ü–æ–ª–Ω—ã–π manual testing checklist (—Å–º. `07_TESTING.md`)
- [ ] –ù–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏
- [ ] System tests –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö flows
- [ ] Code review (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)

**–§–æ–∫—É—Å –Ω–∞:**
- Multi-tenancy leaks (–ö–†–ò–¢–ò–ß–ù–û!)
- N+1 queries
- Permission bypasses
- Frontend –æ—à–∏–±–∫–∏ –≤ console

**–í—Ä–µ–º—è:** ~8 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 22: Performance Optimization

**–ó–∞–¥–∞—á–∏:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –ë–î (–µ—Å–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã)
- [ ] Russian Doll Caching –¥–ª—è –¥–∞—à–±–æ—Ä–¥–æ–≤
- [ ] Eager loading –≤–µ–∑–¥–µ –≥–¥–µ –µ—Å—Ç—å N+1
- [ ] Frontend: React.memo –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–ú–µ—Ç—Ä–∏–∫–∏:**
- Roadmap show < 500ms (—Å –∫—ç—à–æ–º < 100ms)
- Dashboard < 300ms
- No N+1 queries (Bullet gem)

**–í—Ä–µ–º—è:** ~6 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 23: Production Deploy + Litestream Setup

**–ó–∞–¥–∞—á–∏:**
- [ ] Kamal config (`config/deploy.yml`)
- [ ] Litestream config (backups –≤ S3)
- [ ] Environment variables (secrets)
- [ ] First production deploy
- [ ] Smoke tests –Ω–∞ production

**Deploy:**
```bash
kamal setup  # –ü–µ—Ä–≤—ã–π —Ä–∞–∑
kamal deploy
kamal app exec 'bin/rails db:seed'
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- Production –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ https://
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç
- Seeds –∑–∞–≥—Ä—É–∂–µ–Ω—ã (–ø—É–±–ª–∏—á–Ω—ã–µ roadmaps –µ—Å—Ç—å)
- Litestream —Ä–µ–ø–ª–∏—Ü–∏—Ä—É–µ—Ç –≤ S3

**–í—Ä–µ–º—è:** ~8 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 24: Monitoring + Error Tracking

**–ó–∞–¥–∞—á–∏:**
- [ ] Setup Sentry (error tracking)
- [ ] Healthcheck endpoint (`/up`)
- [ ] UptimeRobot (uptime monitoring)
- [ ] Production logs analysis

**Sentry:**
```bash
bundle add sentry-ruby sentry-rails

# config/initializers/sentry.rb
Sentry.init do |config|
  config.dsn = ENV['SENTRY_DSN']
  config.environment = Rails.env
end
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- Sentry –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫–∏
- UptimeRobot –ø–∏–Ω–≥—É–µ—Ç –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
- Healthcheck –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200

**–í—Ä–µ–º—è:** ~5 —á–∞—Å–æ–≤

---

### –î–µ–Ω—å 25: Documentation + Launch Prep

**–ó–∞–¥–∞—á–∏:**
- [ ] README.md (–¥–ª—è GitHub)
- [ ] User Guide (–∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è)
- [ ] Admin Guide (–∫–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π roadmap)
- [ ] Prepare landing page (–ø—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞ `/`)

**README:**
```markdown
# IndustrialPROFI

B2B SaaS –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–∞—Ä—Ç—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
- –¢—Ä–µ–∫–∏–Ω–≥ –¥–æ–ø—É—Å–∫–æ–≤ –∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- –ú–∞—Ç—Ä–∏—Ü–∞ –Ω–∞–≤—ã–∫–æ–≤ –∫–æ–º–∞–Ω–¥—ã

## Tech Stack
- Rails 8 + SQLite
- React 19 + Inertia.js
- React Flow
- Kamal 2

## Deploy
...
```

**Landing Page:**
```tsx
// app/frontend/pages/Landing/Index.tsx
<div className="hero">
  <h1>IndustrialPROFI</h1>
  <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞</p>
  <Button href="/register">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ</Button>
</div>
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- README –∞–∫—Ç—É–∞–ª–µ–Ω
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–Ω—è—Ç–Ω–∞
- Landing page –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–∏–ª–∏—á–Ω–æ

**–í—Ä–µ–º—è:** ~6 —á–∞—Å–æ–≤

---

### ‚úÖ –ò—Ç–æ–≥ –ù–µ–¥–µ–ª–∏ 5:
- MVP –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- Deploy –≤ production ‚úì
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚úì
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ ‚úì

**Demo:** –†–∞–±–æ—á–∏–π –ø—Ä–æ–¥—É–∫—Ç –Ω–∞ https://industrialprofi.ru

---

## üéâ MVP –ì–æ—Ç–æ–≤! –ß—Ç–æ –¥–∞–ª—å—à–µ?

### Immediate Next Steps:
1. **Beta Testing:** –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å 2-3 –∫–æ–º–ø–∞–Ω–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **Feedback Loop:** –°–æ–±—Ä–∞—Ç—å —Ñ–∏–¥–±–µ–∫, –∏—Å–ø—Ä–∞–≤–∏—Ç—å –±–∞–≥–∏
3. **First Sales:** –ü—Ä–æ–¥–∞—Ç—å –ø–µ—Ä–≤—ã–µ 3-5 –ø–æ–¥–ø–∏—Å–æ–∫
4. **Iterate:** –£–ª—É—á—à–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Post-MVP Features (v2):
- Drag-and-drop —É–∑–ª–æ–≤ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–æ–≤ –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–∞–Ω-–∫–æ–ø–∏–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- Export –º–∞—Ç—Ä–∏—Ü—ã –≤ PDF/Excel
- API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### Scaling (v3):
- –ê–Ω–≥–ª–∏–π—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
- On-Premise deployment option
- Mobile app
- Advanced analytics

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –£—Å–ø–µ—Ö–∞

### Week 1:
- ‚úÖ –ú–æ–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è

### Week 2:
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å roadmaps

### Week 3:
- ‚úÖ –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å roadmaps (Manager)

### Week 4:
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–º–µ—á–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å (Employee)

### Week 5:
- ‚úÖ MVP –≤ production, –≥–æ—Ç–æ–≤ –∫ –ø–µ—Ä–≤—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º

---

**–£–¥–∞—á–∏! üöÄ**

**P.S.** –ü–æ–º–Ω–∏: "Done is better than perfect". –ì–ª–∞–≤–Ω–æ–µ ‚Äî –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏ –Ω–∞—á–∞—Ç—å –ø—Ä–æ–¥–∞–≤–∞—Ç—å. –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å –ø–æ —Ö–æ–¥—É.
